<!DOCTYPE html><html lang="ko"><head>
  <link rel="stylesheet" href="{{ '/assets/main.css' | relative_url }}">
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ page.title }} · {{ site.title }}</title>
  <style>
  :root{
    --primary:#f4a300;
    --line-center:110px;   /* ← 선/동그라미 중심 x좌표 (필요시 숫자만 조절) */
    --dot-size:12px;
  }

  *{box-sizing:border-box;margin:0}
  html,body{
    height:100%;
    scroll-behavior:smooth;
    /* scroll-snap-type:y mandatory; */
    font-family:pretendard,apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
    color:#333;
  }

  /* 고정 세로선(길이는 JS로 잘라줌) */
  #vline{
    position:relative;   /* 문서 기준 위치 */
    /* left:calc(var(--line-left) + (var(--dot-size)/2 - 2px)); */
    /* left:var(--line-center); */
    left: 400px;
    transform:translateX(-50%);
    width:4px;
    background:var(--primary);
    z-index:0;
    pointer-events:none;
  }

  </style>
</head><body>
  <div id="vline"></div>   <!-- 세로선 -->

  {%- include header.html -%}

  {{ content }}

  <script>
  const links=[...document.querySelectorAll('nav a[href^="#y"]')];
  const io=new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        links.forEach(l=>l.classList.toggle('active', l.getAttribute('href').slice(1)===e.target.id));
      }
    });
  },{threshold:.6});
  document.querySelectorAll('section.year-block').forEach(s=>io.observe(s));
    function setLine(){
      const items = document.querySelectorAll('.timeline li');
      if(!items.length) return;
      const first = items[0];
      const last  = items[items.length-1];

      const firstY = first.getBoundingClientRect().top + window.scrollY + first.offsetHeight/2;
      const lastY  = last.getBoundingClientRect().top  + window.scrollY + last.offsetHeight/2;

      const line = document.getElementById('vline');
      line.style.top = firstY + 'px';
      line.style.height = (lastY - firstY) + 'px';
      line.style.position = 'absolute';
    }

    window.addEventListener('load', setLine);
    window.addEventListener('resize', ()=>{ setTimeout(setLine, 100); });

  </script>
</body></html>
